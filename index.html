<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Keynova Lock Pro - Ù‚ÙÙ„ Ø¨ØµØ±ÙŠ Ø¢Ù…Ù† Ù…Ø­Ø³Ù†</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
<style>
:root {
--primary: #2563eb;
--primary-dark: #1d4ed8;
--primary-light: #3b82f6;
--secondary: #059669;
--accent: #f59e0b;
--accent-dark: #d97706;
--dark: #0f172a;
--dark-light: #1e293b;
--dark-lighter: #334155;
--light: #f8fafc;
--success: #10b981;
--danger: #ef4444;
--warning: #f59e0b;
--info: #06b6d4;
--gray: #94a3b8;
--gray-dark: #64748b;
}

* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {
font-family: 'Tajawal', Arial, sans-serif;
background: linear-gradient(135deg, var(--dark) 0%, var(--dark-light) 50%, var(--dark) 100%);
background-attachment: fixed;
color: var(--light);
min-height: 100vh;
padding: 20px;
direction: rtl;
text-align: right;
position: relative;
overflow-x: hidden;
}

body::before {
content: '';
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: 
  radial-gradient(circle at 20% 80%, rgba(37, 99, 235, 0.1) 0%, transparent 50%),
  radial-gradient(circle at 80% 20%, rgba(5, 150, 105, 0.1) 0%, transparent 50%),
  radial-gradient(circle at 40% 40%, rgba(245, 158, 11, 0.05) 0%, transparent 50%);
z-index: -1;
}

.container {
max-width: 600px;
margin: 0 auto;
padding: 20px;
position: relative;
z-index: 1;
}

header {
text-align: center;
padding: 30px 0 40px;
position: relative;
}

.logo {
background: linear-gradient(135deg, var(--primary), var(--primary-light), var(--secondary));
width: 100px;
height: 100px;
border-radius: 50%;
margin: 0 auto 20px;
display: flex;
align-items: center;
justify-content: center;
box-shadow: 
  0 10px 30px rgba(37, 99, 235, 0.3),
  0 0 0 4px rgba(37, 99, 235, 0.1),
  inset 0 0 0 2px rgba(255, 255, 255, 0.1);
position: relative;
animation: logoFloat 4s ease-in-out infinite;
}

@keyframes logoFloat {
0%, 100% { transform: translateY(0px) rotate(0deg); }
50% { transform: translateY(-10px) rotate(5deg); }
}

.logo::before {
content: '';
position: absolute;
inset: -10px;
border-radius: 50%;
background: linear-gradient(45deg, transparent, rgba(37, 99, 235, 0.2), transparent);
animation: logoGlow 3s linear infinite;
}

@keyframes logoGlow {
0% { transform: rotate(0deg); }
100% { transform: rotate(360deg); }
}

.logo i {
font-size: 42px;
color: white;
z-index: 2;
position: relative;
text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

h1 {
background: linear-gradient(135deg, var(--primary), var(--secondary), var(--accent));
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
font-size: 32px;
margin-bottom: 8px;
font-weight: 800;
text-shadow: 0 0 30px rgba(37, 99, 235, 0.5);
font-family: 'Amiri', serif;
}

.subtitle {
color: var(--gray);
font-size: 16px;
font-weight: 400;
margin-bottom: 5px;
}

.developer-credit {
color: var(--accent);
font-size: 14px;
font-weight: 500;
opacity: 0.9;
}

.card {
background: linear-gradient(135deg, 
  rgba(30, 41, 59, 0.95) 0%, 
  rgba(51, 65, 85, 0.9) 50%, 
  rgba(30, 41, 59, 0.95) 100%);
backdrop-filter: blur(20px);
border-radius: 20px;
padding: 30px;
margin-bottom: 25px;
box-shadow: 
  0 20px 40px rgba(0, 0, 0, 0.3),
  0 0 0 1px rgba(255, 255, 255, 0.05),
  inset 0 1px 0 rgba(255, 255, 255, 0.1);
transition: all 0.4s ease;
border: 1px solid rgba(255, 255, 255, 0.08);
position: relative;
overflow: hidden;
}

.card::before {
content: '';
position: absolute;
top: 0;
left: 0;
right: 0;
height: 1px;
background: linear-gradient(90deg, transparent, var(--primary), transparent);
}

.card:hover {
transform: translateY(-5px);
box-shadow: 
  0 30px 60px rgba(0, 0, 0, 0.4),
  0 0 0 1px rgba(37, 99, 235, 0.2),
  inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

.card-header {
display: flex;
align-items: center;
margin-bottom: 25px;
padding-bottom: 15px;
border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.card-header i {
font-size: 24px;
margin-left: 12px;
background: linear-gradient(135deg, var(--primary), var(--secondary));
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
}

.card-header h3 {
font-size: 22px;
font-weight: 700;
color: var(--light);
text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

.form-group {
margin-bottom: 25px;
}

.form-label {
color: var(--primary-light);
margin-bottom: 12px;
display: block;
font-weight: 600;
font-size: 16px;
text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

.file-input {
width: 100%;
padding: 16px 20px;
background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.04));
border: 1px solid rgba(255, 255, 255, 0.15);
border-radius: 12px;
color: var(--light);
font-size: 16px;
cursor: pointer;
transition: all 0.3s ease;
backdrop-filter: blur(10px);
box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
}

.file-input:hover {
border-color: var(--primary);
background: linear-gradient(135deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.08));
box-shadow: 
  inset 0 1px 3px rgba(0, 0, 0, 0.2),
  0 0 0 2px rgba(37, 99, 235, 0.2);
}

.file-input:focus {
outline: none;
border-color: var(--primary);
box-shadow: 
  inset 0 1px 3px rgba(0, 0, 0, 0.2),
  0 0 0 3px rgba(37, 99, 235, 0.3);
}

.image-gallery {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
gap: 15px;
max-height: 400px;
overflow-y: auto;
padding: 20px;
background: linear-gradient(135deg, rgba(255, 255, 255, 0.03), rgba(255, 255, 255, 0.01));
border-radius: 15px;
border: 1px solid rgba(255, 255, 255, 0.08);
backdrop-filter: blur(10px);
}

.image-gallery::-webkit-scrollbar {
width: 8px;
}

.image-gallery::-webkit-scrollbar-track {
background: rgba(255, 255, 255, 0.05);
border-radius: 4px;
}

.image-gallery::-webkit-scrollbar-thumb {
background: linear-gradient(135deg, var(--primary), var(--secondary));
border-radius: 4px;
}

.image-item {
position: relative;
aspect-ratio: 1;
border-radius: 12px;
overflow: hidden;
cursor: pointer;
transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
border: 2px solid rgba(255, 255, 255, 0.1);
background: var(--dark-lighter);
}

.image-item:hover {
transform: scale(1.08) translateY(-5px);
border-color: var(--primary);
box-shadow: 
  0 15px 30px rgba(37, 99, 235, 0.3),
  0 5px 15px rgba(0, 0, 0, 0.3);
z-index: 10;
}

.image-item.selected {
border-color: var(--accent);
box-shadow: 
  0 0 0 3px rgba(245, 158, 11, 0.3),
  0 15px 30px rgba(245, 158, 11, 0.2),
  inset 0 0 20px rgba(245, 158, 11, 0.1);
transform: scale(1.05);
}

.image-item.selected::after {
content: 'âœ“';
position: absolute;
top: 5px;
left: 5px;
background: var(--accent);
color: white;
border-radius: 50%;
width: 24px;
height: 24px;
display: flex;
align-items: center;
justify-content: center;
font-size: 14px;
font-weight: bold;
z-index: 2;
box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
}

.image-item canvas {
width: 100%;
height: 100%;
object-fit: cover;
transition: all 0.3s ease;
}

.image-item:hover canvas {
transform: scale(1.1);
}

.image-number {
position: absolute;
bottom: 5px;
right: 5px;
background: linear-gradient(135deg, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.6));
color: white;
border-radius: 50%;
width: 28px;
height: 28px;
display: flex;
align-items: center;
justify-content: center;
font-size: 12px;
font-weight: bold;
backdrop-filter: blur(10px);
border: 1px solid rgba(255, 255, 255, 0.2);
z-index: 2;
}

.btn {
display: block;
width: 100%;
padding: 16px 24px;
background: linear-gradient(135deg, var(--primary), var(--primary-dark));
color: white;
border: none;
border-radius: 12px;
font-size: 18px;
font-weight: 700;
cursor: pointer;
transition: all 0.3s ease;
margin-top: 15px;
text-align: center;
position: relative;
overflow: hidden;
box-shadow: 
  0 4px 15px rgba(37, 99, 235, 0.3),
  inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.btn::before {
content: '';
position: absolute;
top: 0;
left: -100%;
width: 100%;
height: 100%;
background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
transition: left 0.5s ease;
}

.btn:hover::before {
left: 100%;
}

.btn:hover {
background: linear-gradient(135deg, var(--primary-light), var(--primary));
transform: translateY(-3px);
box-shadow: 
  0 8px 25px rgba(37, 99, 235, 0.4),
  inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

.btn:active {
transform: translateY(-1px);
}

.btn-secondary {
background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05));
border: 1px solid rgba(255, 255, 255, 0.2);
}

.btn-secondary:hover {
background: linear-gradient(135deg, rgba(255, 255, 255, 0.25), rgba(255, 255, 255, 0.15));
box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
}

.btn-danger {
background: linear-gradient(135deg, var(--danger), #dc2626);
}

.btn-danger:hover {
background: linear-gradient(135deg, #f87171, var(--danger));
box-shadow: 0 8px 25px rgba(239, 68, 68, 0.4);
}

.btn-success {
background: linear-gradient(135deg, var(--success), var(--secondary));
}

.btn-success:hover {
background: linear-gradient(135deg, #34d399, var(--success));
box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
}

select {
width: 100%;
padding: 16px 20px;
background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.04));
border: 1px solid rgba(255, 255, 255, 0.15);
border-radius: 12px;
color: var(--light);
font-size: 16px;
margin-bottom: 20px;
backdrop-filter: blur(10px);
cursor: pointer;
}

select:focus {
outline: none;
border-color: var(--primary);
box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.3);
}

.result {
padding: 20px;
border-radius: 12px;
margin-top: 25px;
text-align: center;
font-size: 16px;
font-weight: 600;
display: none;
backdrop-filter: blur(10px);
border: 1px solid;
}

.success {
background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(5, 150, 105, 0.1));
color: #34d399;
border-color: rgba(16, 185, 129, 0.3);
display: block;
}

.fail {
background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(220, 38, 38, 0.1));
color: #f87171;
border-color: rgba(239, 68, 68, 0.3);
display: block;
}

.warning {
background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(217, 119, 6, 0.1));
color: #fbbf24;
border-color: rgba(245, 158, 11, 0.3);
display: block;
}

.hidden {
display: none;
}

.action-buttons {
display: grid;
grid-template-columns: 1fr 1fr;
gap: 20px;
margin-top: 25px;
}

.action-buttons .btn {
margin: 0;
}

.session-timeout {
background: linear-gradient(135deg, rgba(245, 158, 11, 0.15), rgba(217, 119, 6, 0.05));
border: 1px solid rgba(245, 158, 11, 0.3);
padding: 15px;
border-radius: 12px;
text-align: center;
margin-top: 25px;
font-size: 14px;
color: var(--warning);
backdrop-filter: blur(10px);
}

.instructions {
background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
border-radius: 15px;
padding: 20px;
margin-top: 30px;
border-right: 4px solid var(--primary);
backdrop-filter: blur(10px);
}

.instructions h4 {
color: var(--primary-light);
margin-bottom: 15px;
font-size: 18px;
}

.instructions ul {
padding-right: 25px;
}

.instructions li {
margin-bottom: 10px;
color: var(--gray);
line-height: 1.6;
}

.tab-content {
display: none;
}

.active-tab {
display: block;
}

.tabs {
display: flex;
justify-content: space-between;
background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.04));
border-radius: 15px;
padding: 8px;
margin-bottom: 25px;
backdrop-filter: blur(20px);
border: 1px solid rgba(255, 255, 255, 0.1);
}

.tab-btn {
flex: 1;
padding: 15px 20px;
text-align: center;
background: transparent;
color: var(--gray);
border: none;
border-radius: 10px;
cursor: pointer;
font-weight: 600;
font-size: 16px;
transition: all 0.3s ease;
position: relative;
}

.tab-btn:hover {
color: var(--primary-light);
background: rgba(37, 99, 235, 0.1);
}

.tab-btn.active {
background: linear-gradient(135deg, var(--primary), var(--primary-dark));
color: white;
box-shadow: 
  0 4px 15px rgba(37, 99, 235, 0.3),
  inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.status-icon {
margin-left: 10px;
}

.no-key-message {
text-align: center;
padding: 40px 30px;
color: var(--warning);
background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(217, 119, 6, 0.05));
border-radius: 15px;
border: 1px solid rgba(245, 158, 11, 0.2);
}

.no-key-message i {
font-size: 64px;
margin-bottom: 20px;
display: block;
}

.access-denied {
text-align: center;
padding: 40px 30px;
color: var(--danger);
font-size: 18px;
background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.05));
border-radius: 15px;
border: 1px solid rgba(239, 68, 68, 0.2);
}

.access-denied i {
font-size: 64px;
margin-bottom: 20px;
display: block;
}

.loading-spinner {
display: inline-block;
width: 20px;
height: 20px;
border: 3px solid rgba(255, 255, 255, 0.3);
border-radius: 50%;
border-top-color: white;
animation: spin 1s ease-in-out infinite;
margin-left: 10px;
}

@keyframes spin {
to { transform: rotate(360deg); }
}

.security-badge {
position: absolute;
top: 20px;
left: 20px;
background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(5, 150, 105, 0.1));
color: var(--success);
padding: 8px 15px;
border-radius: 20px;
font-size: 12px;
font-weight: 600;
border: 1px solid rgba(16, 185, 129, 0.3);
backdrop-filter: blur(10px);
}

.feature-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
gap: 15px;
margin-top: 20px;
}

.feature-card {
background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
padding: 20px;
border-radius: 12px;
text-align: center;
border: 1px solid rgba(255, 255, 255, 0.08);
transition: all 0.3s ease;
}

.feature-card:hover {
transform: translateY(-5px);
border-color: var(--primary);
box-shadow: 0 10px 30px rgba(37, 99, 235, 0.2);
}

.feature-card i {
font-size: 32px;
color: var(--primary);
margin-bottom: 10px;
}

.feature-card h5 {
color: var(--light);
margin-bottom: 8px;
font-weight: 600;
}

.feature-card p {
color: var(--gray);
font-size: 14px;
}

@media (max-width: 768px) {
.container {
padding: 15px;
}

.card {
padding: 25px 20px;
}

.action-buttons {
grid-template-columns: 1fr;
gap: 15px;
}

h1 {
font-size: 28px;
}

.card-header h3 {
font-size: 20px;
}

.image-gallery {
grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
gap: 12px;
padding: 15px;
}

.logo {
width: 80px;
height: 80px;
}

.logo i {
font-size: 36px;
}

.tabs {
padding: 6px;
}

.tab-btn {
padding: 12px 15px;
font-size: 14px;
}

.feature-grid {
grid-template-columns: 1fr;
}
}

@media (max-width: 480px) {
body {
padding: 10px;
}

.container {
padding: 10px;
}

.card {
padding: 20px 15px;
margin-bottom: 20px;
}

.logo {
width: 70px;
height: 70px;
}

.logo i {
font-size: 32px;
}

h1 {
font-size: 24px;
}

.subtitle {
font-size: 14px;
}

.image-gallery {
grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
gap: 10px;
padding: 12px;
}

.btn {
padding: 14px 20px;
font-size: 16px;
}

.file-input {
padding: 14px 16px;
font-size: 15px;
}

.tab-btn {
padding: 10px 12px;
font-size: 13px;
}
}
</style>
</head>
<body>
<div class="container">
<div class="security-badge">
<i class="fas fa-shield-alt"></i>
ØªØ´ÙÙŠØ± 256-Ø¨Øª
</div>

<header>
<div class="logo">
<i class="fas fa-lock"></i>
</div>
<h1>Keynova Lock Pro</h1>
<p class="subtitle">Ù‚ÙÙ„ Ø¨ØµØ±ÙŠ Ø¢Ù…Ù† Ù…Ø­Ø³Ù† Ø¨Ù…Ù†Ø§Ø¸Ø± Ø·Ø¨ÙŠØ¹ÙŠØ© Ø®Ù„Ø§Ø¨Ø©</p>
<p class="developer-credit">Ù…Ø·ÙˆØ± Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù…: Ø±Ø£ÙØª Ø¹Ù…Ø±</p>
</header>

<div class="tabs">
<button id="verify-tab" class="tab-btn active" onclick="openTab('verify')">
<i class="fas fa-unlock-alt"></i>
ÙØªØ­ Ø§Ù„Ù‚ÙÙ„
</button>
<button id="settings-tab" class="tab-btn" onclick="openTab('settings')">
<i class="fas fa-cog"></i>
Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
</button>
</div>

<!-- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªØ­Ù‚Ù‚ -->
<div id="verify" class="tab-content active-tab">
<div class="card">
<div class="card-header">
<i class="fas fa-unlock-alt"></i>
<h3>ÙØªØ­ Ø§Ù„Ù‚ÙÙ„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ù†Ø¸Ø± Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</h3>
</div>

<div class="form-group">
<label class="form-label">Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†Ø¸Ø± Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ Ø§Ù„Ø³Ø±ÙŠ:</label>
<div class="image-gallery" id="verifyGallery">
<!-- Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù†Ø§Ø¸Ø± Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ© Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
</div>
</div>

<div class="form-group">
<label class="form-label">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø³Ø±ÙŠØ©:</label>
<input type="password" class="file-input" id="verifyPassword" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø³Ø±ÙŠØ©" style="font-size: 16px;">
</div>

<button class="btn" onclick="verifyKey()">
<i class="fas fa-check-circle"></i>
ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø³Ø±ÙŠ
</button>

<div class="result" id="result"></div>
</div>

<div class="instructions">
<h4><i class="fas fa-info-circle"></i> ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†</h4>
<ul>
<li>Ø§Ø®ØªØ± Ù†ÙØ³ Ø§Ù„Ù…Ù†Ø¸Ø± Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ Ø§Ù„Ø°ÙŠ ØªÙ… ØªØ¹ÙŠÙŠÙ†Ù‡ ÙƒÙ…ÙØªØ§Ø­ Ø³Ø±ÙŠ</li>
<li>Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„ØµØ­ÙŠØ­Ø© Ø§Ù„ØªÙŠ ØªÙ… Ø±Ø¨Ø·Ù‡Ø§ Ø¨Ø§Ù„Ù…Ù†Ø¸Ø±</li>
<li>ØªØ£ÙƒØ¯ Ù…Ù† Ø¯Ù‚Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù†Ø¸Ø± ÙˆÙƒØªØ§Ø¨Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</li>
<li>Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ³ØªØ®Ø¯Ù… ØªØ´ÙÙŠØ± SHA-256 Ù„Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù‚ØµÙˆÙ‰</li>
<li>Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø®Ø§Ø·Ø¦Ø© ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„Ù‡Ø§ Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø£Ù…Ø§Ù†</li>
</ul>
</div>
</div>

<!-- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
<div id="settings" class="tab-content">
<!-- Ø±Ø³Ø§Ù„Ø© Ø¹Ù†Ø¯Ù…Ø§ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ÙØªØ§Ø­ -->
<div id="no-key-section" class="no-key-message hidden">
<i class="fas fa-key"></i>
<h3>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ÙØªØ§Ø­ Ø£Ù…Ø§Ù† Ù…Ø­ÙÙˆØ¸</h3>
<p>ÙŠØ±Ø¬Ù‰ ÙØªØ­ Ø§Ù„Ù‚ÙÙ„ Ø£ÙˆÙ„Ø§Ù‹ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…ÙØªØ§Ø­Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ Ø£Ùˆ Ø¥Ù†Ø´Ø§Ø¡ Ù…ÙØªØ§Ø­ Ø¬Ø¯ÙŠØ¯</p>
</div>

<!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙƒÙˆÙ† Ø§Ù„Ù…ÙØªØ§Ø­ Ù…ØªØ§Ø­Ø§Ù‹ -->
<div id="settings-content" class="hidden">
<div class="card">
<div class="card-header">
<i class="fas fa-key"></i>
<h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø³Ø±ÙŠ</h3>
</div>

<div class="form-group">
<label class="form-label">Ø§Ø®ØªØ± Ù…Ù†Ø¸Ø± Ø·Ø¨ÙŠØ¹ÙŠ ÙƒÙ…ÙØªØ§Ø­ Ø³Ø±ÙŠ:</label>
<div class="image-gallery" id="settingsGallery">
<!-- Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù†Ø§Ø¸Ø± Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ© Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
</div>
</div>

<div class="form-group">
<label class="form-label">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:</label>
<input type="password" class="file-input" id="setKeyPassword" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù‚ÙˆÙŠØ© (8 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„)" style="font-size: 16px;">
</div>

<button class="btn" onclick="setKey()">
<i class="fas fa-save"></i>
Ø­ÙØ¸ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø³Ø±ÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯
</button>

<div class="action-buttons">
<button class="btn btn-danger" onclick="removeKey()">
<i class="fas fa-trash-alt"></i>
Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…ÙØªØ§Ø­ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹
</button>
<button class="btn btn-secondary" onclick="generateSecurePassword()">
<i class="fas fa-random"></i>
Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø¢Ù…Ù†Ø©
</button>
</div>
</div>

<div class="card">
<div class="card-header">
<i class="fas fa-shield-alt"></i>
<h3>Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ù„ÙØ§Øª ÙˆØ§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª</h3>
</div>

<div class="feature-grid">
<div class="feature-card">
<i class="fas fa-images"></i>
<h5>Ø­Ù…Ø§ÙŠØ© Ø§Ù„ØµÙˆØ±</h5>
<p>ØªØ£Ù…ÙŠÙ† Ù…Ø¬Ù„Ø¯ Ø§Ù„ØµÙˆØ± Ø§Ù„Ø´Ø®ØµÙŠØ©</p>
</div>

<div class="feature-card">
<i class="fas fa-file-alt"></i>
<h5>Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª</h5>
<p>ØªØ´ÙÙŠØ± Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ù‡Ù…Ø©</p>
</div>

<div class="feature-card">
<i class="fas fa-mobile-alt"></i>
<h5>Ø­Ù…Ø§ÙŠØ© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª</h5>
<p>Ù‚ÙÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø³Ø©</p>
</div>

<div class="feature-card">
<i class="fas fa-folder-lock"></i>
<h5>Ø­Ù…Ø§ÙŠØ© Ù…Ø®ØµØµØ©</h5>
<p>Ø§Ø®ØªÙŠØ§Ø± Ù…Ø¬Ù„Ø¯Ø§Øª Ù…Ø­Ø¯Ø¯Ø©</p>
</div>
</div>

<select id="protectedTarget">
<option value="">-- Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© --</option>
<option value="images">ğŸ–¼ï¸ Ø­Ù…Ø§ÙŠØ© Ø§Ù„ØµÙˆØ± ÙˆØ§Ù„Ø°ÙƒØ±ÙŠØ§Øª</option>
<option value="docs">ğŸ“„ Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø§Ù„Ù…Ù‡Ù…Ø©</option>
<option value="apps">ğŸ“± Ø­Ù…Ø§ÙŠØ© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©</option>
<option value="custom">ğŸ”’ Ø­Ù…Ø§ÙŠØ© Ù…Ø¬Ù„Ø¯ Ù…Ø®ØµØµ</option>
<option value="system">âš™ï¸ Ø­Ù…Ø§ÙŠØ© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</option>
</select>

<div class="action-buttons">
<button class="btn btn-success" onclick="protectSelected()">
<i class="fas fa-lock"></i>
ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©
</button>
<button class="btn btn-secondary" onclick="clearProtection()">
<i class="fas fa-unlock"></i>
Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ù…Ø¤Ù‚ØªØ§Ù‹
</button>
</div>

<div class="result" id="protectionStatus"></div>
</div>

<div class="card">
<div class="card-header">
<i class="fas fa-chart-line"></i>
<h3>Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø£Ù…Ø§Ù†</h3>
</div>

<div class="feature-grid">
<div class="feature-card">
<i class="fas fa-check-circle" style="color: var(--success);"></i>
<h5 id="successCount">0</h5>
<p>Ù…Ø­Ø§ÙˆÙ„Ø© Ù†Ø¬Ø­</p>
</div>

<div class="feature-card">
<i class="fas fa-times-circle" style="color: var(--danger);"></i>
<h5 id="failCount">0</h5>
<p>Ù…Ø­Ø§ÙˆÙ„Ø© ÙØ§Ø´Ù„Ø©</p>
</div>

<div class="feature-card">
<i class="fas fa-clock" style="color: var(--info);"></i>
<h5 id="lastAccess">---</h5>
<p>Ø¢Ø®Ø± Ø¯Ø®ÙˆÙ„</p>
</div>

<div class="feature-card">
<i class="fas fa-calendar" style="color: var(--warning);"></i>
<h5 id="creationDate">---</h5>
<p>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</p>
</div>
</div>
</div>
</div>
</div>

<!-- Ù‚Ø³Ù… Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ù‚Ù‚ -->
<div id="securedActions" class="hidden">
<div class="session-timeout">
<i class="fas fa-clock"></i>
Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ø¢Ù…Ù†Ø© Ø³ØªÙ†ØªÙ‡ÙŠ Ø®Ù„Ø§Ù„ <span id="sessionTimer">15:00</span>
<div style="margin-top: 10px;">
<div style="background: rgba(255, 255, 255, 0.1); height: 4px; border-radius: 2px; overflow: hidden;">
<div id="sessionProgress" style="background: linear-gradient(90deg, var(--success), var(--warning)); height: 100%; width: 100%; border-radius: 2px; transition: width 1s ease;"></div>
</div>
</div>
</div>

<div class="action-buttons">
<button class="btn" onclick="openTab('settings')">
<i class="fas fa-cog"></i>
Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©
</button>
<button class="btn btn-secondary" onclick="lockSession()">
<i class="fas fa-lock"></i>
Ù‚ÙÙ„ Ø§Ù„Ø¬Ù„Ø³Ø© ÙÙˆØ±Ø§Ù‹
</button>
</div>
</div>
</div>

<script>
let selectedVerifyImage = null;
let selectedSettingsImage = null;
let sessionTimer = null;
let sessionTimeLeft = 900; // 15 Ø¯Ù‚ÙŠÙ‚Ø©

// Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø£Ù…Ø§Ù†
let securityStats = {
  successCount: 0,
  failCount: 0,
  lastAccess: null,
  creationDate: null
};

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
function loadSecurityStats() {
  const saved = localStorage.getItem('keynova_security_stats');
  if (saved) {
    securityStats = JSON.parse(saved);
    updateStatsDisplay();
  }
}

// Ø­ÙØ¸ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
function saveSecurityStats() {
  localStorage.setItem('keynova_security_stats', JSON.stringify(securityStats));
  updateStatsDisplay();
}

// ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
function updateStatsDisplay() {
  document.getElementById('successCount').textContent = securityStats.successCount;
  document.getElementById('failCount').textContent = securityStats.failCount;
  document.getElementById('lastAccess').textContent = securityStats.lastAccess ? 
    new Date(securityStats.lastAccess).toLocaleDateString('ar-EG') : '---';
  document.getElementById('creationDate').textContent = securityStats.creationDate ? 
    new Date(securityStats.creationDate).toLocaleDateString('ar-EG') : '---';
}

// Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù†Ø§Ø¸Ø± Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ© Ø§Ù„Ø®Ù„Ø§Ø¨Ø©
function createNaturalLandscape(canvas, sceneType, seed) {
  const ctx = canvas.getContext('2d');
  canvas.width = 120;
  canvas.height = 120;
  
  // Ù…Ø³Ø­ Ø§Ù„Ø®Ù„ÙÙŠØ©
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  
  // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¨Ø°Ø±Ø© Ù„Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ø§Ù„Ù…ØªØ³Ù‚Ø©
  const random = (function(seed) {
    let x = Math.sin(seed) * 10000;
    return function() {
      x = Math.sin(x) * 10000;
      return x - Math.floor(x);
    };
  })(seed);
  
  switch (sceneType) {
    case 'mountain':
      createMountainScene(ctx, canvas, random);
      break;
    case 'forest':
      createForestScene(ctx, canvas, random);
      break;
    case 'ocean':
      createOceanScene(ctx, canvas, random);
      break;
    case 'desert':
      createDesertScene(ctx, canvas, random);
      break;
    case 'sunset':
      createSunsetScene(ctx, canvas, random);
      break;
    case 'lake':
      createLakeScene(ctx, canvas, random);
      break;
    case 'aurora':
      createAuroraScene(ctx, canvas, random);
      break;
    case 'waterfall':
      createWaterfallScene(ctx, canvas, random);
      break;
    case 'flower':
      createFlowerFieldScene(ctx, canvas, random);
      break;
    case 'winter':
      createWinterScene(ctx, canvas, random);
      break;
    default:
      createMountainScene(ctx, canvas, random);
  }
}

// Ù…Ù†Ø¸Ø± Ø¬Ø¨Ù„ÙŠ
function createMountainScene(ctx, canvas, random) {
  // Ø§Ù„Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…ØªØ¯Ø±Ø¬Ø©
  const skyGradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
  skyGradient.addColorStop(0, `hsl(${200 + random() * 40}, 70%, 85%)`);
  skyGradient.addColorStop(0.7, `hsl(${220 + random() * 30}, 60%, 75%)`);
  skyGradient.addColorStop(1, `hsl(${240 + random() * 20}, 50%, 65%)`);
  ctx.fillStyle = skyGradient;
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  
  // Ø§Ù„ØºÙŠÙˆÙ…
  ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
  for (let i = 0; i < 4; i++) {
    const x = random() * canvas.width;
    const y = random() * canvas.height * 0.3;
    drawCloud(ctx, x, y, 15 + random() * 10);
  }
  
  // Ø§Ù„Ø¬Ø¨Ø§Ù„ Ø§Ù„Ø®Ù„ÙÙŠØ©
  ctx.fillStyle = `hsl(${240 + random() * 30}, 30%, 60%)`;
  drawMountain(ctx, 0, canvas.height * 0.4, canvas.width, random);
  
  // Ø§Ù„Ø¬Ø¨Ø§Ù„ Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ©
  ctx.fillStyle = `hsl(${120 + random() * 60}, 40%, 35%)`;
  drawMountain(ctx, 0, canvas.height * 0.6, canvas.width, random);
  
  // Ø§Ù„Ø£Ø´Ø¬Ø§Ø±
  for (let i = 0; i < 6; i++) {
    const x = random() * canvas.width;
    const y = canvas.height * 0.7 + random() * 20;
    drawTree(ctx, x, y, `hsl(${100 + random() * 40}, 50%, 25%)`);
  }
}

// Ù…Ù†Ø¸Ø± ØºØ§Ø¨Ø©
function createForestScene(ctx, canvas, random) {
  // Ø§Ù„Ø³Ù…Ø§Ø¡
  const skyGradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
  skyGradient.addColorStop(0, `hsl(${180 + random() * 40}, 50%, 80%)`);
  skyGradient.addColorStop(1, `hsl(${120 + random() * 40}, 60%, 70%)`);
  ctx.fillStyle = skyGradient;
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  
  // Ø£Ø´Ø¬Ø§Ø± Ø§Ù„Ø®Ù„ÙÙŠØ©
  for (let i = 0; i < 12; i++) {
    const x = random() * canvas.width;
    const y = canvas.height * (0.3 + random() * 0.4);
    const hue = 100 + random() * 80;
    drawTree(ctx, x, y, `hsl(${hue}, 60%, ${20 + random() * 20}%)`, 1.5 + random());
  }
  
  // Ø§Ù„Ø£Ø±Ø¶ÙŠØ©
  ctx.fillStyle = `hsl(${80 + random() * 40}, 40%, 30%)`;
  ctx.fillRect(0, canvas.height * 0.8, canvas.width, canvas.height * 0.2);
  
  // Ø£Ø´Ø¬Ø§Ø± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
  for (let i = 0; i < 8; i++) {
    const x = random() * canvas.width;
    const y = canvas.height * (0.5 + random() * 0.3);
    drawTree(ctx, x, y, `hsl(${90 + random() * 50}, 70%, 15%)`, 2 + random());
  }
}

// Ù…Ù†Ø¸Ø± Ù…Ø­ÙŠØ·
function createOceanScene(ctx, canvas, random) {
  // Ø§Ù„Ø³Ù…Ø§Ø¡
  const skyGradient = ctx.createLinearGradient(0, 0, 0, canvas.height * 0.6);
  skyGradient.addColorStop(0, `hsl(${200 + random() * 40}, 80%, 90%)`);
  skyGradient.addColorStop(1, `hsl(${220 + random() * 30}, 70%, 80%)`);
  ctx.fillStyle = skyGradient;
  ctx.fillRect(0, 0, canvas.width, canvas.height * 0.6);
  
  // Ø§Ù„Ù…Ø­ÙŠØ·
  const oceanGradient = ctx.createLinearGradient(0, canvas.height * 0.6, 0, canvas.height);
  oceanGradient.addColorStop(0, `hsl(${200 + random() * 40}, 80%, 60%)`);
  oceanGradient.addColorStop(1, `hsl(${210 + random() * 30}, 90%, 40%)`);
  ctx.fillStyle = oceanGradient;
  ctx.fillRect(0, canvas.height * 0.6, canvas.width, canvas.height * 0.4);
  
  // Ø§Ù„Ø£Ù…ÙˆØ§Ø¬
  ctx.strokeStyle = 'rgba(255, 255, 255, 0.6)';
  ctx.lineWidth = 2;
  for (let i = 0; i < 4; i++) {
    const y = canvas.height * 0.6 + i * 10 + random() * 5;
    drawWave(ctx, y, canvas.width, random);
  }
  
  // Ø§Ù„Ø´Ù…Ø³
  const sunX = canvas.width * (0.7 + random() * 0.2);
  const sunY = canvas.height * (0.2 + random() * 0.2);
  drawSun(ctx, sunX, sunY, 15 + random() * 5);
}

// Ù…Ù†Ø¸Ø± ØµØ­Ø±Ø§ÙˆÙŠ
function createDesertScene(ctx, canvas, random) {
  // Ø§Ù„Ø³Ù…Ø§Ø¡
  const skyGradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
  skyGradient.addColorStop(0, `hsl(${30 + random() * 40}, 70%, 85%)`);
  skyGradient.addColorStop(1, `hsl(${40 + random() * 30}, 80%, 75%)`);
  ctx.fillStyle = skyGradient;
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  
  // Ø§Ù„ÙƒØ«Ø¨Ø§Ù† Ø§Ù„Ø±Ù…Ù„ÙŠØ©
  for (let i = 0; i < 3; i++) {
    const y = canvas.height * (0.4 + i * 0.2);
    ctx.fillStyle = `hsl(${35 + random() * 25}, 60%, ${65 - i * 10}%)`;
    drawDune(ctx, y, canvas.width, random);
  }
  
  // Ø§Ù„Ø´Ù…Ø³
  drawSun(ctx, canvas.width * 0.8, canvas.height * 0.2, 20);
  
  // Ø§Ù„ØµØ¨Ø§Ø±
  for (let i = 0; i < 3; i++) {
    const x = random() * canvas.width;
    const y = canvas.height * (0.6 + random() * 0.2);
    drawCactus(ctx, x, y, random);
  }
}

// Ù…Ù†Ø¸Ø± ØºØ±ÙˆØ¨
function createSunsetScene(ctx, canvas, random) {
  // Ø§Ù„Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…ØªØ¯Ø±Ø¬Ø©
  const skyGradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
  skyGradient.addColorStop(0, `hsl(${250 + random() * 30}, 60%, 30%)`);
  skyGradient.addColorStop(0.3, `hsl(${300 + random() * 40}, 70%, 50%)`);
  skyGradient.addColorStop(0.7, `hsl(${20 + random() * 40}, 80%, 60%)`);
  skyGradient.addColorStop(1, `hsl(${40 + random() * 30}, 90%, 70%)`);
  ctx.fillStyle = skyGradient;
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  
  // Ø§Ù„Ø´Ù…Ø³ Ø§Ù„ÙƒØ¨ÙŠØ±Ø©
  const sunGradient = ctx.createRadialGradient(
    canvas.width * 0.7, canvas.height * 0.7, 0,
    canvas.width * 0.7, canvas.height * 0.7, 25
  );
  sunGradient.addColorStop(0, '#FFF8DC');
  sunGradient.addColorStop(0.5, '#FFD700');
  sunGradient.addColorStop(1, '#FF8C00');
  ctx.fillStyle = sunGradient;
  ctx.beginPath();
  ctx.arc(canvas.width * 0.7, canvas.height * 0.7, 25, 0, Math.PI * 2);
  ctx.fill();
  
  // Ø§Ù„Ø£Ø±Ø¶ÙŠØ© Ø§Ù„Ø¯Ø§ÙƒÙ†Ø©
  ctx.fillStyle = `hsl(${60 + random() * 40}, 30%, 20%)`;
  ctx.fillRect(0, canvas.height * 0.8, canvas.width, canvas.height * 0.2);
  
  // Ø¸Ù„Ø§Ù„ Ø§Ù„Ø£Ø´Ø¬Ø§Ø±
  for (let i = 0; i < 5; i++) {
    const x = random() * canvas.width;
    drawTreeSilhouette(ctx, x, canvas.height * 0.8);
  }
}

// Ù…Ù†Ø¸Ø± Ø¨Ø­ÙŠØ±Ø©
function createLakeScene(ctx, canvas, random) {
  // Ø§Ù„Ø³Ù…Ø§Ø¡
  const skyGradient = ctx.createLinearGradient(0, 0, 0, canvas.height * 0.5);
  skyGradient.addColorStop(0, `hsl(${200 + random() * 40}, 70%, 85%)`);
  skyGradient.addColorStop(1, `hsl(${220 + random() * 30}, 60%, 75%)`);
  ctx.fillStyle = skyGradient;
  ctx.fillRect(0, 0, canvas.width, canvas.height * 0.5);
  
  // Ø§Ù„Ø¨Ø­ÙŠØ±Ø©
  const lakeGradient = ctx.createLinearGradient(0, canvas.height * 0.5, 0, canvas.height);
  lakeGradient.addColorStop(0, `hsl(${210 + random() * 30}, 80%, 70%)`);
  lakeGradient.addColorStop(1, `hsl(${200 + random() * 40}, 90%, 50%)`);
  ctx.fillStyle = lakeGradient;
  ctx.fillRect(0, canvas.height * 0.5, canvas.width, canvas.height * 0.5);
  
  // Ø§Ù†Ø¹ÙƒØ§Ø³ ÙÙŠ Ø§Ù„Ù…Ø§Ø¡
  ctx.save();
  ctx.scale(1, -1);
  ctx.translate(0, -canvas.height);
  ctx.globalAlpha = 0.3;
  
  // Ø£Ø´Ø¬Ø§Ø± Ù…Ù†Ø¹ÙƒØ³Ø©
  for (let i = 0; i < 6; i++) {
    const x = random() * canvas.width;
    drawTree(ctx, x, canvas.height * 0.5, `hsl(${100 + random() * 40}, 50%, 25%)`);
  }
  
  ctx.restore();
  
  // Ø£Ø´Ø¬Ø§Ø± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
  for (let i = 0; i < 6; i++) {
    const x = random() * canvas.width;
    drawTree(ctx, x, canvas.height * 0.5, `hsl(${100 + random() * 40}, 50%, 25%)`);
  }
}

// Ù…Ù†Ø¸Ø± Ø§Ù„Ø´ÙÙ‚ Ø§Ù„Ù‚Ø·Ø¨ÙŠ
function createAuroraScene(ctx, canvas, random) {
  // Ø§Ù„Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„ÙŠÙ„ÙŠØ©
  const skyGradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
  skyGradient.addColorStop(0, '#001122');
  skyGradient.addColorStop(1, '#003344');
  ctx.fillStyle = skyGradient;
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  
  // Ø§Ù„Ù†Ø¬ÙˆÙ…
  ctx.fillStyle = 'white';
  for (let i = 0; i < 20; i++) {
    const x = random() * canvas.width;
    const y = random() * canvas.height * 0.6;
    const size = random() * 2;
    ctx.beginPath();
    ctx.arc(x, y, size, 0, Math.PI * 2);
    ctx.fill();
  }
  
  // Ø§Ù„Ø´ÙÙ‚ Ø§Ù„Ù‚Ø·Ø¨ÙŠ
  ctx.globalCompositeOperation = 'screen';
  const auroraGradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height * 0.6);
  auroraGradient.addColorStop(0, `hsla(${120 + random() * 60}, 80%, 60%, 0.6)`);
  auroraGradient.addColorStop(0.5, `hsla(${180 + random() * 60}, 70%, 70%, 0.4)`);
  auroraGradient.addColorStop(1, `hsla(${240 + random() * 60}, 90%, 80%, 0.3)`);
  
  ctx.fillStyle = auroraGradient;
  for (let i = 0; i < 3; i++) {
    const y = canvas.height * (0.1 + i * 0.15);
    drawAuroraWave(ctx, y, canvas.width, random, i);
  }
  
  ctx.globalCompositeOperation = 'source-over';
  
  // Ø§Ù„Ø£Ø±Ø¶ÙŠØ© Ø§Ù„Ù…Ø«Ù„Ø¬Ø©
  ctx.fillStyle = '#E6F3FF';
  ctx.fillRect(0, canvas.height * 0.8, canvas.width, canvas.height * 0.2);
}

// Ù…Ù†Ø¸Ø± Ø´Ù„Ø§Ù„
function createWaterfallScene(ctx, canvas, random) {
  // Ø§Ù„Ø³Ù…Ø§Ø¡
  const skyGradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
  skyGradient.addColorStop(0, `hsl(${200 + random() * 40}, 60%, 80%)`);
  skyGradient.addColorStop(1, `hsl(${180 + random() * 40}, 70%, 70%)`);
  ctx.fillStyle = skyGradient;
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  
  // Ø§Ù„ØµØ®ÙˆØ±
  ctx.fillStyle = `hsl(${30 + random() * 30}, 30%, 40%)`;
  drawRocks(ctx, canvas, random);
  
  // Ø§Ù„Ø´Ù„Ø§Ù„
  const waterfallGradient = ctx.createLinearGradient(canvas.width * 0.4, 0, canvas.width * 0.6, canvas.height);
  waterfallGradient.addColorStop(0, 'rgba(255, 255, 255, 0.9)');
  waterfallGradient.addColorStop(1, 'rgba(173, 216, 230, 0.7)');
  ctx.fillStyle = waterfallGradient;
  ctx.fillRect(canvas.width * 0.45, canvas.height * 0.2, canvas.width * 0.1, canvas.height * 0.6);
  
  // Ø±Ø´ Ø§Ù„Ù…Ø§Ø¡
  ctx.fillStyle = 'rgba(255, 255, 255, 0.6)';
  for (let i = 0; i < 15; i++) {
    const x = canvas.width * 0.4 + random() * canvas.width * 0.2;
    const y = canvas.height * 0.6 + random() * canvas.height * 0.2;
    ctx.beginPath();
    ctx.arc(x, y, random() * 3, 0, Math.PI * 2);
    ctx.fill();
  }
  
  // Ø§Ù„Ù†Ø¨Ø§ØªØ§Øª
  for (let i = 0; i < 8; i++) {
    const x = random() * canvas.width;
    const y = canvas.height * (0.7 + random() * 0.2);
    if (x < canvas.width * 0.4 || x > canvas.width * 0.6) {
      drawPlant(ctx, x, y, random);
    }
  }
}

// Ø­Ù‚Ù„ Ø²Ù‡ÙˆØ±
function createFlowerFieldScene(ctx, canvas, random) {
  // Ø§Ù„Ø³Ù…Ø§Ø¡
  const skyGradient = ctx.createLinearGradient(0, 0, 0, canvas.height * 0.4);
  skyGradient.addColorStop(0, `hsl(${200 + random() * 40}, 70%, 90%)`);
  skyGradient.addColorStop(1, `hsl(${220 + random() * 30}, 60%, 80%)`);
  ctx.fillStyle = skyGradient;
  ctx.fillRect(0, 0, canvas.width, canvas.height * 0.4);
  
  // Ø§Ù„Ø­Ù‚Ù„
  const fieldGradient = ctx.createLinearGradient(0, canvas.height * 0.4, 0, canvas.height);
  fieldGradient.addColorStop(0, `hsl(${90 + random() * 40}, 60%, 70%)`);
  fieldGradient.addColorStop(1, `hsl(${110 + random() * 30}, 70%, 50%)`);
  ctx.fillStyle = fieldGradient;
  ctx.fillRect(0, canvas.height * 0.4, canvas.width, canvas.height * 0.6);
  
  // Ø§Ù„Ø²Ù‡ÙˆØ±
  const flowerColors = [
    `hsl(${300 + random() * 60}, 80%, 70%)`, // Ø¨Ù†ÙØ³Ø¬ÙŠ/ÙˆØ±Ø¯ÙŠ
    `hsl(${40 + random() * 40}, 90%, 70%)`,  // Ø£ØµÙØ±/Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ  
    `hsl(${0 + random() * 40}, 80%, 70%)`,   // Ø£Ø­Ù…Ø±
    `hsl(${200 + random() * 60}, 80%, 70%)`, // Ø£Ø²Ø±Ù‚
    `hsl(${120 + random() * 40}, 80%, 70%)`  // Ø£Ø®Ø¶Ø±
  ];
  
  for (let i = 0; i < 25; i++) {
    const x = random() * canvas.width;
    const y = canvas.height * (0.5 + random() * 0.4);
    const color = flowerColors[Math.floor(random() * flowerColors.length)];
    drawFlower(ctx, x, y, color, random);
  }
}

// Ù…Ù†Ø¸Ø± Ø´ØªÙˆÙŠ
function createWinterScene(ctx, canvas, random) {
  // Ø§Ù„Ø³Ù…Ø§Ø¡ Ø§Ù„Ø±Ù…Ø§Ø¯ÙŠØ©
  const skyGradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
  skyGradient.addColorStop(0, '#D3D3D3');
  skyGradient.addColorStop(1, '#A0A0A0');
  ctx.fillStyle = skyGradient;
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  
  // Ø§Ù„Ø£Ø±Ø¶ÙŠØ© Ø§Ù„Ù…Ø«Ù„Ø¬Ø©
  ctx.fillStyle = '#F0F8FF';
  ctx.fillRect(0, canvas.height * 0.7, canvas.width, canvas.height * 0.3);
  
  // Ø§Ù„Ø£Ø´Ø¬Ø§Ø± Ø§Ù„Ù…Ø«Ù„Ø¬Ø©
  for (let i = 0; i < 8; i++) {
    const x = random() * canvas.width;
    const y = canvas.height * (0.5 + random() * 0.2);
    drawSnowTree(ctx, x, y, random);
  }
  
  // Ø±Ù‚Ø§Ù‚Ø§Øª Ø§Ù„Ø«Ù„Ø¬
  ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
  for (let i = 0; i < 30; i++) {
    const x = random() * canvas.width;
    const y = random() * canvas.height;
    drawSnowflake(ctx, x, y, random() * 3 + 1);
  }
}

// Ø¯ÙˆØ§Ù„ Ø±Ø³Ù… Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©

function drawCloud(ctx, x, y, size) {
  ctx.beginPath();
  ctx.arc(x, y, size, 0, Math.PI * 2);
  ctx.arc(x + size * 0.7, y, size * 0.8, 0, Math.PI * 2);
  ctx.arc(x + size * 1.4, y, size * 0.6, 0, Math.PI * 2);
  ctx.arc(x + size * 0.7, y - size * 0.5, size * 0.7, 0, Math.PI * 2);
  ctx.fill();
}

function drawMountain(ctx, startX, startY, width, random) {
  ctx.beginPath();
  ctx.moveTo(startX, startY + (random() - 0.5) * 20);
  
  for (let x = 0; x <= width; x += 10) {
    const y = startY + (random() - 0.5) * 30 - Math.abs(x - width/2) * 0.3;
    ctx.lineTo(startX + x, y);
  }
  
  ctx.lineTo(startX + width, 120);
  ctx.lineTo(startX, 120);
  ctx.closePath();
  ctx.fill();
}

function drawTree(ctx, x, y, color, scale = 1) {
  // Ø§Ù„Ø¬Ø°Ø¹
  ctx.fillStyle = '#4A4A4A';
  ctx.fillRect(x - 2 * scale, y, 4 * scale, 15 * scale);
  
  // Ø§Ù„Ø£ÙˆØ±Ø§Ù‚
  ctx.fillStyle = color;
  ctx.beginPath();
  ctx.arc(x, y - 5 * scale, 8 * scale, 0, Math.PI * 2);
  ctx.fill();
}

function drawTreeSilhouette(ctx, x, y) {
  ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
  ctx.fillRect(x - 2, y, 4, 15);
  ctx.beginPath();
  ctx.arc(x, y - 5, 12, 0, Math.PI * 2);
  ctx.fill();
}

function drawSun(ctx, x, y, radius) {
  const sunGradient = ctx.createRadialGradient(x, y, 0, x, y, radius);
  sunGradient.addColorStop(0, '#FFF8DC');
  sunGradient.addColorStop(0.7, '#FFD700');
  sunGradient.addColorStop(1, '#FFA500');
  
  ctx.fillStyle = sunGradient;
  ctx.beginPath();
  ctx.arc(x, y, radius, 0, Math.PI * 2);
  ctx.fill();
}

function drawWave(ctx, y, width, random) {
  ctx.beginPath();
  ctx.moveTo(0, y);
  
  for (let x = 0; x <= width; x += 10) {
    const waveY = y + Math.sin(x * 0.1 + random() * 10) * 3;
    ctx.lineTo(x, waveY);
  }
  
  ctx.stroke();
}

function drawDune(ctx, y, width, random) {
  ctx.beginPath();
  ctx.moveTo(0, y + random() * 20);
  
  for (let x = 0; x <= width; x += 15) {
    const duneY = y + Math.sin(x * 0.05) * 20 + random() * 10;
    ctx.lineTo(x, duneY);
  }
  
  ctx.lineTo(width, 120);
  ctx.lineTo(0, 120);
  ctx.closePath();
  ctx.fill();
}

function drawCactus(ctx, x, y, random) {
  const height = 20 + random() * 15;
  
  // Ø§Ù„Ø¬Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
  ctx.fillStyle = `hsl(${90 + random() * 40}, 60%, 40%)`;
  ctx.fillRect(x - 3, y - height, 6, height);
  
  // Ø§Ù„Ø£Ø°Ø±Ø¹
  if (random() > 0.5) {
    ctx.fillRect(x - 8, y - height * 0.7, 5, height * 0.4);
  }
  if (random() > 0.7) {
    ctx.fillRect(x + 3, y - height * 0.5, 5, height * 0.3);
  }
}

function drawAuroraWave(ctx, y, width, random, layer) {
  const amplitude = 15 + layer * 5;
  const frequency = 0.02 + random() * 0.01;
  
  ctx.beginPath();
  ctx.moveTo(0, y);
  
  for (let x = 0; x <= width; x += 5) {
    const waveY = y + Math.sin(x * frequency + layer) * amplitude;
    ctx.lineTo(x, waveY);
  }
  
  ctx.lineTo(width, y + amplitude * 2);
  ctx.lineTo(0, y + amplitude * 2);
  ctx.closePath();
  ctx.fill();
}

function drawRocks(ctx, canvas, random) {
  for (let i = 0; i < 5; i++) {
    const x = random() * canvas.width;
    const y = canvas.height * (0.6 + random() * 0.2);
    const width = 15 + random() * 20;
    const height = 10 + random() * 15;
    
    ctx.beginPath();
    ctx.ellipse(x, y, width, height, random() * Math.PI, 0, Math.PI * 2);
    ctx.fill();
  }
}

function drawPlant(ctx, x, y, random) {
  ctx.strokeStyle = `hsl(${90 + random() * 40}, 70%, 30%)`;
  ctx.lineWidth = 2;
  
  for (let i = 0; i < 3 + random() * 3; i++) {
    ctx.beginPath();
    ctx.moveTo(x, y);
    ctx.quadraticCurveTo(
      x + (random() - 0.5) * 20,
      y - random() * 15,
      x + (random() - 0.5) * 15,
      y - 10 - random() * 10
    );
    ctx.stroke();
  }
}

function drawFlower(ctx, x, y, color, random) {
  // Ø§Ù„Ø³Ø§Ù‚
  ctx.strokeStyle = `hsl(${90 + random() * 40}, 70%, 30%)`;
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(x, y);
  ctx.lineTo(x, y - 8 - random() * 5);
  ctx.stroke();
  
  // Ø§Ù„Ø¨ØªÙ„Ø§Øª
  ctx.fillStyle = color;
  for (let i = 0; i < 5; i++) {
    const angle = (i / 5) * Math.PI * 2;
    const petalX = x + Math.cos(angle) * 3;
    const petalY = y - 10 + Math.sin(angle) * 3;
    
    ctx.beginPath();
    ctx.arc(petalX, petalY, 2 + random() * 2, 0, Math.PI * 2);
    ctx.fill();
  }
  
  // Ø§Ù„Ù…Ø±ÙƒØ²
  ctx.fillStyle = `hsl(${40 + random() * 40}, 80%, 70%)`;
  ctx.beginPath();
  ctx.arc(x, y - 10, 1.5, 0, Math.PI * 2);
  ctx.fill();
}

function drawSnowTree(ctx, x, y, random) {
  // Ø§Ù„Ø¬Ø°Ø¹
  ctx.fillStyle = '#4A4A4A';
  ctx.fillRect(x - 2, y, 4, 15);
  
  // Ø§Ù„Ø£ÙˆØ±Ø§Ù‚ Ø§Ù„Ù…Ø«Ù„Ø¬Ø©
  ctx.fillStyle = '#228B22';
  ctx.beginPath();
  ctx.arc(x, y - 5, 8, 0, Math.PI * 2);
  ctx.fill();
  
  // Ø§Ù„Ø«Ù„Ø¬ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø¬Ø±Ø©
  ctx.fillStyle = '#F0F8FF';
  ctx.beginPath();
  ctx.arc(x, y - 5, 6, 0, Math.PI);
  ctx.fill();
}

function drawSnowflake(ctx, x, y, size) {
  ctx.beginPath();
  ctx.arc(x, y, size, 0, Math.PI * 2);
  ctx.fill();
}

// Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†Ø§Ø¸Ø± Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ©
function createImageGallery(containerId, isSettings = false) {
  const container = document.getElementById(containerId);
  container.innerHTML = '';
  
  const sceneTypes = [
    'mountain', 'forest', 'ocean', 'desert', 'sunset',
    'lake', 'aurora', 'waterfall', 'flower', 'winter',
    'mountain', 'forest', 'ocean', 'desert', 'sunset',
    'lake', 'aurora', 'waterfall', 'flower', 'winter'
  ];
  
  for (let i = 1; i <= 20; i++) {
    const imageItem = document.createElement('div');
    imageItem.className = 'image-item';
    imageItem.onclick = () => selectImage(i, isSettings);
    
    const canvas = document.createElement('canvas');
    const sceneType = sceneTypes[(i - 1) % sceneTypes.length];
    createNaturalLandscape(canvas, sceneType, i * 123 + (isSettings ? 456 : 789));
    
    const numberDiv = document.createElement('div');
    numberDiv.className = 'image-number';
    numberDiv.textContent = i;
    
    imageItem.appendChild(canvas);
    imageItem.appendChild(numberDiv);
    imageItem.dataset.imageId = i;
    
    container.appendChild(imageItem);
  }
}

// Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø©
function selectImage(imageId, isSettings = false) {
  const galleryId = isSettings ? 'settingsGallery' : 'verifyGallery';
  const container = document.getElementById(galleryId);
  
  // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø³Ø§Ø¨Ù‚
  container.querySelectorAll('.image-item').forEach(item => {
    item.classList.remove('selected');
  });
  
  // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
  const selectedItem = container.querySelector(`[data-image-id="${imageId}"]`);
  if (selectedItem) {
    selectedItem.classList.add('selected');
    
    if (isSettings) {
      selectedSettingsImage = imageId;
    } else {
      selectedVerifyImage = imageId;
    }
  }
}

// Ø¯Ø§Ù„Ø© Ù„Ø­Ø³Ø§Ø¨ Ø¨ØµÙ…Ø© Ù…Ø±ÙƒØ¨Ø© Ù…Ù† Ø§Ù„ØµÙˆØ±Ø© ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
async function calculateCombinedHash(imageId, password) {
  try {
    const combinedData = `nature_scene_${imageId}_secure_password_${password}_keynova_v2`;
    const encoder = new TextEncoder();
    const data = encoder.encode(combinedData);
    
    const hashBuffer = await crypto.subtle.digest("SHA-256", data);
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
  } catch (error) {
    console.error("Error calculating hash:", error);
    showResult("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¢Ù…Ù†Ø©", "fail");
    return null;
  }
}

// Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ÙØªØ§Ø­
async function verifyKey() {
  if (!selectedVerifyImage) {
    showResult("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù†Ø¸Ø± Ø·Ø¨ÙŠØ¹ÙŠ Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù†Ù‡", "fail");
    return;
  }

  const password = document.getElementById("verifyPassword").value;
  if (!password) {
    showResult("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø³Ø±ÙŠØ©", "fail");
    return;
  }

  const storedHash = localStorage.getItem("keynova_combined_hash_v2");

  if (!storedHash) {
    showResult("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ÙØªØ§Ø­ Ø¢Ù…Ø§Ù† Ù…Ø­ÙÙˆØ¸ØŒ ÙŠØ±Ø¬Ù‰ Ø¥Ù†Ø´Ø§Ø¡ Ù…ÙØªØ§Ø­ Ø¬Ø¯ÙŠØ¯ Ø£ÙˆÙ„Ø§Ù‹", "warning");
    document.getElementById("settings-content").classList.remove("hidden");
    document.getElementById("no-key-section").classList.add("hidden");
    return;
  }

  showResult("Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø¢Ù…Ù†..." + '<div class="loading-spinner"></div>', "warning");

  try {
    // ØªØ£Ø®ÙŠØ± Ù„Ù„Ù…Ø­Ø§ÙƒØ§Ø©
    await new Promise(resolve => setTimeout(resolve, 1500));
    
    const currentHash = await calculateCombinedHash(selectedVerifyImage, password);
    if (!currentHash) return;

    if (currentHash === storedHash) {
      securityStats.successCount++;
      securityStats.lastAccess = new Date().toISOString();
      saveSecurityStats();
      
      showResult("âœ… ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ù†Ø¬Ø§Ø­! Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¢Ù…Ù†", "success");
      document.getElementById("securedActions").classList.remove("hidden");
      document.getElementById("settings-content").classList.remove("hidden");
      document.getElementById("no-key-section").classList.add("hidden");
      startSessionTimer();
    } else {
      securityStats.failCount++;
      saveSecurityStats();
      
      showResult("âŒ Ø§Ù„Ù…Ù†Ø¸Ø± Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©", "fail");
      
      // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø®ÙŠØ± Ø£Ù…Ù†ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„ÙØ§Ø´Ù„Ø©
      if (securityStats.failCount >= 3) {
        setTimeout(() => {
          showResult("âš ï¸ ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø¯Ø®ÙˆÙ„ Ù…Ø´Ø¨ÙˆÙ‡Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹", "fail");
        }, 2000);
      }
    }
  } catch (error) {
    console.error("Verification error:", error);
    showResult("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø¢Ù…Ù†", "fail");
  }
}

// Ø¯Ø§Ù„Ø© ØªØ¹ÙŠÙŠÙ† Ù…ÙØªØ§Ø­ Ø¬Ø¯ÙŠØ¯
async function setKey() {
  if (!selectedSettingsImage) {
    showResult("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù†Ø¸Ø± Ø·Ø¨ÙŠØ¹ÙŠ Ù„ÙŠÙƒÙˆÙ† Ù…ÙØªØ§Ø­Ùƒ Ø§Ù„Ø³Ø±ÙŠ", "fail");
    return;
  }

  const password = document.getElementById("setKeyPassword").value;
  if (!password) {
    showResult("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù‚ÙˆÙŠØ©", "fail");
    return;
  }

  if (password.length < 8) {
    showResult("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 8 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù„Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù‚ØµÙˆÙ‰", "fail");
    return;
  }

  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù‚ÙˆØ© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
  const passwordStrength = checkPasswordStrength(password);
  if (passwordStrength < 3) {
    showResult("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¶Ø¹ÙŠÙØ©. ÙŠØ±Ø¬Ù‰ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ø²ÙŠØ¬ Ù…Ù† Ø§Ù„Ø£Ø­Ø±Ù ÙˆØ§Ù„Ø£Ø±Ù‚Ø§Ù… ÙˆØ§Ù„Ø±Ù…ÙˆØ²", "warning");
    return;
  }

  const confirmChange = await showConfirmDialog("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØ¹ÙŠÙŠÙ† Ù‡Ø°Ø§ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø¢Ù…Ù†ØŸ Ù„Ù† ØªØªÙ…ÙƒÙ† Ù…Ù† Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù†Ø¸Ø§Ù… Ø¨Ø¯ÙˆÙ† Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†Ø¸Ø± Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±.");
  if (!confirmChange) return;

  try {
    showResult("Ø¬Ø§Ø±ÙŠ Ø­ÙØ¸ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø¢Ù…Ù†..." + '<div class="loading-spinner"></div>', "warning");
    
    await new Promise(resolve => setTimeout(resolve, 2000));
    
    const hash = await calculateCombinedHash(selectedSettingsImage, password);
    if (!hash) return;

    localStorage.setItem("keynova_combined_hash_v2", hash);
    
    // ØªØ­Ø¯ÙŠØ« Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡
    if (!securityStats.creationDate) {
      securityStats.creationDate = new Date().toISOString();
    }
    saveSecurityStats();
    
    showResult("âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø¢Ù…Ù† Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ø¨Ù†Ø¬Ø§Ø­", "success");
    
    // Ù…Ø³Ø­ Ø§Ù„Ø­Ù‚ÙˆÙ„
    document.getElementById("setKeyPassword").value = '';
    selectedSettingsImage = null;
    document.querySelectorAll('#settingsGallery .image-item').forEach(item => {
      item.classList.remove('selected');
    });
  } catch (error) {
    console.error("Error setting key:", error);
    showResult("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­ÙØ¸ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø¢Ù…Ù†", "fail");
  }
}

// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù‚ÙˆØ© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
function checkPasswordStrength(password) {
  let strength = 0;
  if (password.length >= 8) strength++;
  if (/[a-z]/.test(password)) strength++;
  if (/[A-Z]/.test(password)) strength++;
  if (/\d/.test(password)) strength++;
  if (/[^a-zA-Z\d]/.test(password)) strength++;
  return strength;
}

// Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø¢Ù…Ù†Ø©
function generateSecurePassword() {
  const chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*';
  let password = '';
  
  for (let i = 0; i < 12; i++) {
    password += chars.charAt(Math.floor(Math.random() * chars.length));
  }
  
  document.getElementById("setKeyPassword").value = password;
  showResult("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø¢Ù…Ù†Ø©. ÙŠØ±Ø¬Ù‰ Ø­ÙØ¸Ù‡Ø§ ÙÙŠ Ù…ÙƒØ§Ù† Ø¢Ù…Ù†", "success");
}

// Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…ÙØªØ§Ø­
async function removeKey() {
  if (!localStorage.getItem("keynova_combined_hash_v2")) {
    showResult("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ÙØªØ§Ø­ Ø¢Ù…Ø§Ù† Ù…Ø­ÙÙˆØ¸", "fail");
    return;
  }

  const confirmDelete = await showConfirmDialog("âš ï¸ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø¢Ù…Ù† Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ØŸ Ø³ØªÙÙ‚Ø¯ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù…ÙŠØ©.");
  if (!confirmDelete) return;

  localStorage.removeItem("keynova_combined_hash_v2");
  localStorage.removeItem("protected_target");
  localStorage.removeItem("keynova_security_stats");
  
  // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
  securityStats = { successCount: 0, failCount: 0, lastAccess: null, creationDate: null };
  updateStatsDisplay();
  
  document.getElementById("securedActions").classList.add("hidden");
  document.getElementById("settings-content").classList.add("hidden");
  document.getElementById("no-key-section").classList.remove("hidden");
  showResult("âœ… ØªÙ…Øª Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø¢Ù…Ù† Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹", "success");
}

// Ø¯Ø§Ù„Ø© Ø¥Ù†Ø´Ø§Ø¡ modal ØªØ£ÙƒÙŠØ¯ Ù…Ø®ØµØµ
function showConfirmDialog(message) {
  return new Promise((resolve) => {
    const modal = document.createElement('div');
    modal.style.cssText = `
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      backdrop-filter: blur(10px);
    `;
    
    modal.innerHTML = `
      <div style="
        background: linear-gradient(135deg, var(--dark-light), var(--dark-lighter));
        padding: 40px;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
        max-width: 450px;
        width: 90%;
        text-align: center;
        border: 1px solid rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(20px);
      ">
        <div style="
          width: 80px;
          height: 80px;
          background: linear-gradient(135deg, var(--warning), var(--accent-dark));
          border-radius: 50%;
          margin: 0 auto 25px;
          display: flex;
          align-items: center;
          justify-content: center;
        ">
          <i class="fas fa-exclamation-triangle" style="font-size: 36px; color: white;"></i>
        </div>
        <h3 style="color: var(--light); margin-bottom: 20px; font-size: 20px; font-weight: 700;">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</h3>
        <p style="color: var(--gray); margin-bottom: 35px; font-size: 16px; line-height: 1.6;">${message}</p>
        <div style="display: flex; gap: 20px; justify-content: center;">
          <button id="cancelBtn" style="
            padding: 15px 30px;
            background: rgba(255, 255, 255, 0.1);
            color: var(--light);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
          ">Ø¥Ù„ØºØ§Ø¡</button>
          <button id="confirmBtn" style="
            padding: 15px 30px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
          ">ØªØ£ÙƒÙŠØ¯</button>
        </div>
      </div>
    `;
    
    document.body.appendChild(modal);
    
    const cancelBtn = modal.querySelector('#cancelBtn');
    const confirmBtn = modal.querySelector('#confirmBtn');
    
    cancelBtn.onmouseover = () => {
      cancelBtn.style.background = 'rgba(255, 255, 255, 0.2)';
    };
    
    cancelBtn.onmouseout = () => {
      cancelBtn.style.background = 'rgba(255, 255, 255, 0.1)';
    };
    
    confirmBtn.onmouseover = () => {
      confirmBtn.style.transform = 'translateY(-2px)';
      confirmBtn.style.boxShadow = '0 8px 25px rgba(37, 99, 235, 0.4)';
    };
    
    confirmBtn.onmouseout = () => {
      confirmBtn.style.transform = 'translateY(0)';
      confirmBtn.style.boxShadow = '0 4px 15px rgba(37, 99, 235, 0.3)';
    };
    
    cancelBtn.onclick = () => {
      document.body.removeChild(modal);
      resolve(false);
    };
    
    confirmBtn.onclick = () => {
      document.body.removeChild(modal);
      resolve(true);
    };
    
    modal.onclick = (e) => {
      if (e.target === modal) {
        document.body.removeChild(modal);
        resolve(false);
      }
    };
  });
}

// Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ù…Ø­Ø¯Ø¯
function protectSelected() {
  const target = document.getElementById("protectedTarget").value;
  
  if (!target) {
    showResult("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©", "fail");
    return;
  }

  localStorage.setItem("protected_target", target);
  showResult(`âœ… ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© Ø¹Ù„Ù‰: ${getTargetName(target)}`, "success");
}

// Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø­Ù…Ø§ÙŠØ©
function clearProtection() {
  if (!localStorage.getItem("protected_target")) {
    showResult("Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ù…Ø§ÙŠØ© Ù…ÙØ¹Ù„Ø© Ø­Ø§Ù„ÙŠØ§Ù‹", "fail");
    return;
  }

  localStorage.removeItem("protected_target");
  showResult("ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­", "success");
}

// ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
function openTab(tabName) {
  document.querySelectorAll('.tab-content').forEach(tab => {
    tab.classList.remove('active-tab');
  });

  document.getElementById(tabName).classList.add('active-tab');

  document.querySelectorAll('.tab-btn').forEach(btn => {
    btn.classList.remove('active');
  });

  event.currentTarget.classList.add('active');
}

// Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
function showResult(message, type) {
  const resultDiv = document.getElementById("result");
  resultDiv.innerHTML = message;
  resultDiv.className = "result " + type;
}

// Ø¨Ø¯Ø¡ Ù…Ø¤Ù‚Øª Ø§Ù„Ø¬Ù„Ø³Ø©
function startSessionTimer() {
  sessionTimeLeft = 900; // 15 Ø¯Ù‚ÙŠÙ‚Ø©
  const timerElement = document.getElementById("sessionTimer");
  const progressElement = document.getElementById("sessionProgress");

  if (sessionTimer) {
    clearInterval(sessionTimer);
  }

  sessionTimer = setInterval(() => {
    const minutes = Math.floor(sessionTimeLeft / 60);
    const seconds = sessionTimeLeft % 60;

    timerElement.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
    
    // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
    const progressPercent = (sessionTimeLeft / 900) * 100;
    progressElement.style.width = progressPercent + '%';
    
    if (progressPercent < 25) {
      progressElement.style.background = 'linear-gradient(90deg, var(--danger), var(--warning))';
    } else if (progressPercent < 50) {
      progressElement.style.background = 'linear-gradient(90deg, var(--warning), var(--accent))';
    }

    if (sessionTimeLeft <= 0) {
      clearInterval(sessionTimer);
      lockSession();
    } else {
      sessionTimeLeft--;
    }
  }, 1000);
}

// Ù‚ÙÙ„ Ø§Ù„Ø¬Ù„Ø³Ø©
function lockSession() {
  if (sessionTimer) {
    clearInterval(sessionTimer);
  }
  
  document.getElementById("securedActions").classList.add("hidden");
  document.getElementById("settings-content").classList.add("hidden");
  document.getElementById("no-key-section").classList.remove("hidden");
  showResult("ğŸ”’ Ø§Ù†ØªÙ‡Øª ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ø¢Ù…Ù†Ø©ØŒ ÙŠØ±Ø¬Ù‰ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ­Ù‚Ù‚", "warning");
  
  // Ù…Ø³Ø­ Ø§Ù„ØªØ­Ø¯ÙŠØ¯Ø§Øª
  selectedVerifyImage = null;
  selectedSettingsImage = null;
  document.getElementById("verifyPassword").value = '';
  document.querySelectorAll('.image-item').forEach(item => {
    item.classList.remove('selected');
  });
}

// Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„Ù‡Ø¯Ù
function getTargetName(target) {
  const targets = {
    'images': 'Ø§Ù„ØµÙˆØ± ÙˆØ§Ù„Ø°ÙƒØ±ÙŠØ§Øª',
    'docs': 'Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø§Ù„Ù…Ù‡Ù…Ø©',
    'apps': 'Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©',
    'custom': 'Ù…Ø¬Ù„Ø¯ Ù…Ø®ØµØµ',
    'system': 'Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…'
  };
  return targets[target] || target;
}

// ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
window.onload = function() {
  // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
  loadSecurityStats();
  
  // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¹Ø§Ø±Ø¶ Ø§Ù„Ù…Ù†Ø§Ø¸Ø± Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ©
  createImageGallery('verifyGallery', false);
  createImageGallery('settingsGallery', true);
  
  // ØªØ­Ù…ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø¥Ù† ÙˆØ¬Ø¯Øª
  const storedTarget = localStorage.getItem("protected_target");
  if (storedTarget) {
    document.getElementById("protectionStatus").innerHTML = `âœ… Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ù…ÙØ¹Ù‘Ù„Ø© Ø¹Ù„Ù‰: ${getTargetName(storedTarget)}`;
    document.getElementById("protectionStatus").className = "result success";
  }

  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…ÙØªØ§Ø­
  const hasKey = localStorage.getItem("keynova_combined_hash_v2") !== null;

  if (hasKey) {
    document.getElementById("settings-content").classList.add("hidden");
    document.getElementById("no-key-section").classList.add("hidden");
  } else {
    document.getElementById("settings-content").classList.remove("hidden");
    document.getElementById("no-key-section").classList.remove("hidden");
  }
  
  // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„ØªØ­Ù…ÙŠÙ„
  document.body.style.opacity = '0';
  setTimeout(() => {
    document.body.style.transition = 'opacity 0.5s ease';
    document.body.style.opacity = '1';
  }, 100);
};
</script>
</body>
</html>
